
### üåê Translations
* [English](https://github.com/Stoupy51/SmartOreGeneration/blob/main/README.md)
* [Fran√ßaise](https://github.com/Stoupy51/SmartOreGeneration/blob/main/README.fr.md)


# üìñ Smart Ore Generation

[![GitHub](https://img.shields.io/github/v/release/Stoupy51/SmartOreGeneration?logo=github&label=GitHub)](https://github.com/Stoupy51/SmartOreGeneration/releases/latest)
[![Smithed](https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fapi.smithed.dev%2Fv2%2Fpacks%2Fsmart_ore_generation%2Fmeta&query=%24.stats.downloads.total&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDQgNCIgeG1sbnM6dj0iaHR0cHM6Ly92ZWN0YS5pby9uYW5vIj48cGF0aCBkPSJNLjczNy44NTlsLjg4Ny0uMjg1Yy4wOTktLjAzMi4yMDUtLjAzMi4zMDQgMGwxLjMzNS40MjktMS4wNC4zMzR6bS0uMTk1LjE4OXYuNDg3YzAgLjEwNS4wNjguMTk5LjE2OC4yMzFsMS41MTQuNDg3TDMuMjkgMS45MWMuMS0uMDMyLjE2OC0uMTI2LjE2OC0uMjMxdi0uNDg3bC0xLjIzNC4zOTF6bS44NTkgMS4xOWwuODIzLjI2LjQxMi0uMTI3di4zNzlsLS40MTIuMTMyLS44MjMtLjI2NHptLS40NDguNTA1di4yOTlsMS4yNzIuNDA4LjgyMy0uMjY0di0uM2wtLjgyMy4yNTl6IiBwYWludC1vcmRlcj0ic3Ryb2tlIGZpbGwgbWFya2VycyIgZmlsbD0iIzFiNDhjNCIvPjwvc3ZnPg%3D%3D&logoColor=224bbb&label=Smithed&labelColor=black&color=224bbb)](https://smithed.net/packs/smart_ore_generation)
[![Modrinth](https://img.shields.io/modrinth/dt/smart_ore_generation?logo=modrinth&label=Modrinth)](https://modrinth.com/datapack/smart_ore_generation)
[![PMC](https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fwww.planetminecraft.com%2Fdata-pack%2Fsmart-ore-generation%2Fstatsv2&query=%24.downloads&logo=data%3Aimage%2Fvnd.microsoft.icon%3Bbase64%2CAAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJdNAUBLJgD%2FSyYA%2FxkoD%2F8vKAn%2Fl00BgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FwAAAP8AAAD%2FmVgI%2F0tcHf8CXjP%2FL10l%2FwAAAP8AAAD%2FAAAA%2FwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2F5VOAf%2BVTQH%2FfVkP%2FyZ%2BOv8BgET%2FAYBE%2FwGARP9LZyP%2FlU0B%2F5ZNAf8AAAD%2FAAAAAAAAAAAAAAAAAAAAAJVOAf%2FYeRL%2F64wl%2F7eZOP8Bo1f%2FAaNW%2FwGjVv88nkv%2F2oEb%2F9N0Df%2FTdA3%2FlU0B%2F5dNAUAAAAAAAAAAAAAAAACkVQH%2F3pAq%2F6CcOv92pUf%2FLLli%2F12zW%2F%2FBqEv%2Fy59B%2F%2B2OJ%2F%2Figxz%2F03QN%2F5VNAf%2BEUARAAAAAAAAAAAAAAAD%2FjoMq%2Fzi2XP96r1T%2F3ahG%2F%2BCvUP%2F9qkr%2F%2F6hL%2F%2F2kRP%2F2mTT%2F7Y4n%2F%2BCBGv93aRf%2FAAAA%2FwAAAAAAAAAAp1gB%2FxHEb%2F%2BlslX%2F36xL%2F9StTP%2F%2Fp0f%2F%2F6VE%2F%2F%2BqTv%2F%2Fqk7%2F%2FaVH%2F%2FecOf%2Ftjif%2FMIQ3%2FwNhMP8AAAAAAAAAAI9bA%2F8SxXD%2FHr5o%2Fzm8ZP%2Fvo0D%2F%2F6I9%2F%2F%2BiPf%2F%2Fq1D%2F%2F6tQ%2F%2F%2BrUP%2F7pEb%2F7Y4n%2FwGCQf8BYDD%2FAAAAAAAAAAB8Wgz%2FFMdy%2FxDDbv8Qw27%2Fh7Zd%2F%2F%2BnSP%2F%2Foj3%2F%2F6xS%2F%2F%2BsUv%2F%2Fp0j%2F%2B504%2F%2B2OJ%2F%2BUfyH%2FAWIw%2FwAAAAAAAAAAelsL%2Fwa2Y%2F8TxnH%2FieK4%2F9fu2P%2F%2F2rH%2F%2F6pN%2F%2F%2BlQv%2F%2FpUL%2F%2F6NA%2F%2F2fOv%2F1li%2F%2FlH8h%2FwJhMP8AAAAAqVcBQIFaCkABczz%2FFMdy%2F7Hs0P%2F%2F%2F%2F%2F%2F6O7W%2F9SyV%2F%2F%2Foj3%2F%2F6RC%2F%2FidOv%2Fxkyz%2FxJEw%2F01fGf8hWR1wAVQqQAAAAAAAAAAAAV4y%2Fw2%2Fa%2F%2Bs16b%2F1OfK%2F7%2Fdr%2F%2F%2BrFH%2F%2F6RB%2F%2F%2BmRv%2F2mzn%2F2Y4p%2F2qOOP8BVCr%2FJDorQAAAAAAAAAAAAAAAAAFeMv8BsF7%2FLbpl%2F0DAaP%2Bmtlz%2Fo7Vc%2F%2F%2BoS%2F%2F%2FqEv%2F9ps6%2FyeOQf8BjUb%2FAlQq%2FwFUKkAAAAAAAAAAAAAAAAAAAAAAAl0z%2FxheKf8PdTL%2FeqxN%2FyvDaf%2F8rVL%2Fz6dF%2F7R6H%2F8BXS7%2FAlQq%2FwdRKwIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGUCICeF4GQGNfDP9sXwj%2FqFgB%2F4hbB%2F9DWiKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKpXAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FB8AAOAHAADAAwAAwAMAAMADAACAAQAAgAEAAIABAACAAQAAgAEAAMADAADAAwAAwAMAAOAHAAD8H%2F%2F%2F%2F%2F%2F%2F%2Fw%3D%3D&label=PMC&color=6ec310)](https://www.planetminecraft.com/data-pack/smart-ore-generation/)
[![Discord](https://img.shields.io/discord/1216400498488377467?label=Discord&logo=discord)](https://discord.gg/anxzu6rA9F)
[![Python Datapack](https://img.shields.io/github/v/release/Stoupy51/python_datapack?logo=github&label=Python%20Datapack)](https://github.com/Stoupy51/PythonDatapackTemplate)

üéÆ Librairie Minecraft sous forme de data pack pour g√©rer la g√©n√©ration de minerais custom en utilisant un syst√®me intelligent pour la position des minerais.
* üîÑ Cette librairie est un compl√©ment au syst√®me de g√©n√©ration de minerai vanilla. Elle ne le remplace pas.
* ü§ù Elle a √©t√© con√ßue pour √™tre compatible avec d'autres librairies de g√©n√©ration de minerai.
* üíé Cette librairie ne fournit qu'un moyen de g√©n√©rer des minerais de mani√®re intelligente, elle ne fournit pas de fonctions de pour l'impl√©mentation de custom blocks.
* üåç Vous pouvez configurer la librairie pour g√©n√©rer des minerais dans une dimension sp√©cifique, ou dans toutes les dimensions.
* ‚ö° Elle fonctionne avec une hauteur minimale personnalis√©e de l'overworld, un score constant est calcul√© pour l'overworld uniquement si besoin.
* üåê Cette librairie supporte les dimensions customs, mais vous devez les ajouter au function tag `denied_dimensions` pour les emp√™cher d'√™tre scann√©es si vous ne voulez pas qu'elles le soient.
* ‚ú® La librairie fonctionnera m√™me si le monde a √©t√© g√©n√©r√© avant l'installation de celle-ci car elle ne d√©pend pas de la g√©n√©ration du monde.

üì¶ Il s'agit d'une librairie int√©gr√©e que vous int√©grez dans votre Datapack au lieu d'avoir √† le t√©l√©charger s√©par√©ment. N√©cessite [LanternLoad](https://github.com/LanternMC/load) pour fonctionner.

üîç Vous pouvez voir sur cette image comment les filons de minerai sont **toujours adjacents √† des blocs d'air**.
![image](https://cdn.modrinth.com/data/zpEM3sbc/images/51080a8f811cdd114653fd983c520fa1e210efb8.png)

<br>

# üìö Explication du syst√®me
Toutes les 5 secondes, la librairie ex√©cute √† l'emplacement de chaque joueur les √©tapes suivantes :
* ‚ö° Ex√©cuter le function tag `denied_dimensions` pour vous permettre de refuser que certaines dimensions soient scann√©es.
* üåç Si la dimension est autoris√©e, 8 r√©gions autour des joueurs sont scann√©es. (La taille par d√©faut des r√©gions est 96x96)
* üîç Pour chaque r√©gion, la librairie va v√©rifier si elle a d√©j√† √©t√© scann√©e. Si non, elle lancera la g√©n√©ration de minerai pour cette r√©gion.
* üìç Ensuite, le function tag `generate_ores` est appel√© √† l'origine de la r√©gion (0, 0, 0).
* üíé Vous pouvez ajouter votre propre fonction de g√©n√©ration de minerai √† ce function tag o√π vous g√©n√©rerez vos minerais en fonction de conditions que vous avez choisies. (comme les dimensions, les biomes, etc...)
* üé≤ Pour chaque filon de minerai que vous g√©n√©rez, vous devez utiliser le function tag de position al√©atoire `random_position` pour obtenir une position al√©atoire √† l'int√©rieur de la r√©gion. Ce function tag d√©placera la position vers une position al√©atoire et au bloc d'air le plus proche. En proc√©dant ainsi, vous √©viterez que les minerais soient g√©n√©r√©s √† l'int√©rieur des blocs et ne soient jamais trouv√©s par les joueurs (ce qui ajoutera du lag au serveur si le minerai utilise une entit√©). Ainsi, les minerais seront plus faciles √† trouver.
* üö´ Et apr√®s chaque v√©rification, la librairie sauvegardera la r√©gion comme "scann√©e" pour √©viter qu'elle ne soit scann√©e √† nouveau en ajoutant un `barrier block` √† l'origine de la r√©gion.
* ‚ú® Enfin, le fonction tag `post_generation` est appel√© pour vous permettre de faire quelques t√¢ches post-g√©n√©ration, comme lancer une fonction sur tous vos minerais nouvellement g√©n√©r√©s pour leur ajouter des tags nbt ou autre chose.

<br>

# üîß Function Tag

## üì• <ins>Signals</ins>

### `#smart_ore_generation:v1/denied_dimensions`
* üîç Ce function tag est appel√© lorsque la librairie veut scanner une r√©gion. Vous pouvez ajouter quelles dimensions que vous voulez emp√™cher d'√™tre scann√©es en ajoutant une fonction √† ce tag.
* üìù Pour utiliser ce signal, vous devez ajouter une fonction √† la liste de tags situ√©e dans `data/smart_ore_generation/tags/function/v1/signals/denied_dimensions.json`.
* üìñ Reportez-vous √† ce mod√®le pour le contenu de la fonction [ici](https://github.com/Stoupy51/SmartOreGeneration/blob/main/build/datapack/data/smart_ore_generation/function/v1.7.0/signals/denied_dimensions.mcfunction).
```mcfunction
#> smart_ore_generation:v1.7.0/signals/denied_dimensions
#
# @within			#smart_ore_generation:v1/signals/denied_dimensions
# @executed			as & at le joueur qui a d√©clench√© le signal
# @input score		#authorized smart_ore_generation.data √©gal √† 1 ou 0 si un autre datapack a d√©j√† refus√© la g√©n√©ration
#
## WARNING!
# - Vous devez v√©rifier que le score #authorized vaut 1 avant d'ex√©cuter des commandes pour √©viter de r√©activer la g√©n√©ration dans une dimension qui est d√©sactiv√©e par un autre datapack.
# - Mettre le score #authorized √† 0 d√©sactivera la g√©n√©ration dans la dimension pour tous les datapacks.

## Voici un exemple pour d√©sactiver la g√©n√©ration dans une dimension :
execute if score #authorized smart_ore_generation.data matches 1 if predicate simplenergy:in_overworld run scoreboard players set #authorized smart_ore_generation.data 0

## Autre exemple :
execute if score #authorized smart_ore_generation.data matches 1 if dimension minecraft:overworld run scoreboard players set #authorized smart_ore_generation.data 0
```

### `#smart_ore_generation:v1/generate_ores`
* üîç Ce function tag est appel√© lorsque la librairie veut g√©n√©rer des minerais dans une r√©gion. Vous pouvez ajouter votre propre fonction de g√©n√©ration de minerai √† ce tag.
* üìù Pour utiliser ce signal, vous devez ajouter une fonction √† la liste de tags situ√©e dans `data/smart_ore_generation/tags/function/v1/signals/generate_ores.json`.
* üìñ R√©f√©rez-vous √† ce mod√®le pour le contenu de la fonction [ici](https://github.com/Stoupy51/SmartOreGeneration/blob/main/build/datapack/data/smart_ore_generation/function/v1.7.0/signals/example/generate_ores.mcfunction)
```mcfunction
#> smart_ore_generation:v1.7.0/signals/generate_ores
#
# @within			#smart_ore_generation:v1/signals/generate_ores
# @executed			as un marker sp√©cial & at une position dont vous ne devriez pas vous soucier
#
## WARNING!
# - Vous ne devez pas utiliser /kill @s dans ce fichier, ou la librairie enti√®re cessera de fonctionner.
# - N'oubliez pas de modifier les scores #min_height et #max_height avant d'essayer de g√©n√©rer des minerais.
#
# @example from SimplEnergy datapack
# Cet exemple g√©n√®re 4 filons de Simplunium Ore dans l'overworld uniquement.
# Par r√©gion et entre le point le plus bas du monde (minecraft par d√©faut : -64) et y=40

# Dimension score, 0 = overworld
scoreboard players set #dimension smart_ore_generation.data -1
execute if predicate simplenergy:in_overworld run scoreboard players set #dimension smart_ore_generation.data 0

# Generate Simplunium Ore (x4) in the overworld only
scoreboard players operation #min_height smart_ore_generation.data = _OVERWORLD_BOTTOM smart_ore_generation.data
scoreboard players set #max_height smart_ore_generation.data 40
execute if score #dimension smart_ore_generation.data matches 0 run function smart_ore_generation:v1.7.0/signals/example/simplunium_ore
execute if score #dimension smart_ore_generation.data matches 0 run function smart_ore_generation:v1.7.0/signals/example/simplunium_ore
execute if score #dimension smart_ore_generation.data matches 0 run function smart_ore_generation:v1.7.0/signals/example/simplunium_ore
execute if score #dimension smart_ore_generation.data matches 0 run function smart_ore_generation:v1.7.0/signals/example/simplunium_ore
# Voir le mod√®le dans le lien pour le contenu de la fonction smart_ore_generation:v1.7.0/signals/example/simplunium_ore.mcfunction
```

### `#smart_ore_generation:v1/post_generation`
* üîç Ce function tag est appel√© lorsque la librairie a fini de g√©n√©rer des minerais dans les r√©gions. Vous pouvez ajouter votre propre fonction de post-g√©n√©ration √† ce tag.
* üìù Pour utiliser ce signal, vous devez ajouter une fonction √† la liste de tags situ√©e dans `data/smart_ore_generation/tags/function/v1/signals/post_generation.json`.
* üìñ R√©f√©rez-vous √† ce mod√®le pour le contenu de la fonction [ici](https://github.com/Stoupy51/SmartOreGeneration/blob/main/build/datapack/data/smart_ore_generation/function/v1.7.0/signals/example/post_generation.mcfunction)
```mcfunction
#> smart_ore_generation:v1.7.0/signals/post_generation
#
# @within			#smart_ore_generation:v1/signals/post_generation
# @executed			as none at none (default of a /schedule)
#
# Cette fonction est ex√©cut√©e une fois apr√®s la g√©n√©ration de toutes les r√©gions.
# Par exemple, si 6 r√©gions sont g√©n√©r√©es, cette fonction sera ex√©cut√©e 1 fois apr√®s la g√©n√©ration de toutes les r√©gions.
# Elle peut √™tre utilis√©e pour effectuer certaines t√¢ches post-g√©n√©ration, comme ex√©cuter une fonction sur tous les minerais que vous avez g√©n√©r√©
# au lieu de l'ex√©cuter sur chaque minerai individuellement lorsque vous le g√©n√©rez.
# Utile pour l'optimisation.
#
# @example from SimplEnergy datapack
# Cet exemple va √©diter les nbt des entit√©s pour les simplunium ore et deepslate simplunium ore
# si ils ont √©t√© g√©n√©r√©s tout au long du processus de g√©n√©ration.
# Ceci est utile pour l'optimisation car vous n'ex√©cutez la fonction "secondary" qu'une seule fois
# au lieu de l'ex√©cuter sur chaque minerai individuellement lorsque vous le g√©n√©rez.

# Place simplunium ore if it has been generated
execute if score #generated_ore simplenergy.data matches 1 as @e[tag=simplenergy.new_simplunium_ore] at @s run function simplenergy:place/simplunium_ore/secondary
execute if score #generated_ore simplenergy.data matches 1 run scoreboard players reset #generated_ore simplenergy.data

# Place deepslate simplunium ore if it has been generated
execute if score #generated_deepslate_ore simplenergy.data matches 1 as @e[tag=simplenergy.new_deepslate_simplunium_ore] at @s run function simplenergy:place/deepslate_simplunium_ore/secondary
execute if score #generated_deepslate_ore simplenergy.data matches 1 run scoreboard players reset #generated_deepslate_ore simplenergy.data
```

## üì§ <ins>Slots</ins>

### `#smart_ore_generation:v1/slots/random_position`
* üé≤ Ce function tag doit √™tre appel√© lorsque vous avez besoin d'une position al√©atoire dans la r√©gion.
* üìñ Pour utiliser correctement ce slot, voir le mod√®le [ici](https://github.com/Stoupy51/SmartOreGeneration/blob/main/build/datapack/data/smart_ore_generation/function/v1.7.0/signals/example/simplunium_ore.mcfunction)
```mcfunction
#> smart_ore_generation:v1.7.0/signals/example/simplunium_ore
#
# @example from SimplEnergy datapack
# Exemple de comment trouver une position al√©atoire dans une r√©gion pour g√©n√©rer un minerai
# Toujours lancer le function tag de position al√©atoire avant tout
# @TIP: La position al√©atoire n'est pas plate, elle a un chiffre apr√®s la virgule.
# Vous pouvez utiliser ce chiffre pour g√©n√©rer le minerai d'une certaine mani√®re comme ci-dessous
# Il va essayer de placer le filon de minerai en fonction du chiffre
# donc sur chaque ligne ci-dessous, certaines peuvent √©chouer rendant cela plus r√©aliste
# r√©sultant en un filon de minerai contenant entre 2 et 6 minerais (dans cet exemple)

## Essayer de trouver une position al√©atoire adjacente √† l'air dans la r√©gion pour g√©n√©rer le minerai.
function #smart_ore_generation:v1/slots/random_position

# Placing Simplunium Ore Patch
execute at @s if block ~ ~ ~ #simplenergy:for_simplunium_ore run function simplenergy:calls/smart_ore_generation/simplunium_type
execute at @s positioned ~0.8 ~0.8 ~0.8 if block ~ ~ ~ #simplenergy:for_simplunium_ore run function simplenergy:calls/smart_ore_generation/simplunium_type
execute at @s positioned ~0.0 ~0.8 ~0.8 if block ~ ~ ~ #simplenergy:for_simplunium_ore run function simplenergy:calls/smart_ore_generation/simplunium_type
execute at @s positioned ~0.8 ~0.8 ~0.0 if block ~ ~ ~ #simplenergy:for_simplunium_ore run function simplenergy:calls/smart_ore_generation/simplunium_type
execute at @s positioned ~0.8 ~0.0 ~0.8 if block ~ ~ ~ #simplenergy:for_simplunium_ore run function simplenergy:calls/smart_ore_generation/simplunium_type
execute at @s positioned ~0.0 ~0.8 ~0.0 if block ~ ~ ~ #simplenergy:for_simplunium_ore run function simplenergy:calls/smart_ore_generation/simplunium_type
```

## ‚≠ê Historique des √©toiles (GitHub)

<a href="https://star-history.com/#Stoupy51/SmartOreGeneration&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=Stoupy51/SmartOreGeneration&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=Stoupy51/SmartOreGeneration&type=Date" />
   <img alt="Historique des √©toiles" src="https://api.star-history.com/svg?repos=Stoupy51/SmartOreGeneration&type=Date" />
 </picture>
</a>

